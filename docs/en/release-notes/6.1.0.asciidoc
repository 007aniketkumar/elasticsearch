[role="xpack"]
[[xes-6.1.0]]
== {es} {xpack} 6.1.0 Release Notes
++++
<titleabbrev>6.1.0 Release Notes</titleabbrev>
++++

[[xes-breaking-6.1.0]]
[float]
=== Breaking changes

Security::
* The `certgen` command now returns validation errors when it encounters problems
reading from an input file (with the `-in` command option). Previously these
errors might have been ignored or caused the command to abort with unclear
messages. For more information, see <<certgen>>.
// https://github.com/elastic/x-pack-elasticsearch/pull/2711[#2711]

[[xes-feature-6.1.0]]
[float]
=== Breaking changes

Machine Learning::

* Added the ability to create job forecasts. This feature enables you to use
historical behavior to predict the future behavior of your time series. You can
create forecasts in {kib} or by using the <<ml-forecast,forecast jobs>> API.
+
--
NOTE: You cannot create forecasts for jobs that were created in previous
versions; this functionality is available only for jobs created in 6.1 or later.

--
// https://github.com/elastic/x-pack-elasticsearch/pull/3139[#3139] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/443[#443])
// https://github.com/elastic/x-pack-elasticsearch/pull/3121[#3121] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/443[#443])
// https://github.com/elastic/machine-learning-cpp/pull/399[#399] (issue: https://github.com/elastic/machine-learning-cpp/issues/397[#397])
// https://github.com/elastic/machine-learning-cpp/pull/384[#384] (issue: https://github.com/elastic/machine-learning-cpp/issues/340[#340])
// https://github.com/elastic/x-pack-elasticsearch/pull/2796[#2796] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/2547[#2547])
// https://github.com/elastic/x-pack-elasticsearch/pull/3095[#3095] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/3093[#3093])
// https://github.com/elastic/x-pack-elasticsearch/pull/3077[#3077] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/322[#322])
// https://github.com/elastic/x-pack-elasticsearch/pull/3073[#3073]
// https://github.com/elastic/x-pack-elasticsearch/pull/3070[#3070]
// https://github.com/elastic/x-pack-elasticsearch/pull/3027[#3027]
// https://github.com/elastic/x-pack-elasticsearch/pull/3025[#3025]
// https://github.com/elastic/x-pack-elasticsearch/pull/2936[#2936]
// https://github.com/elastic/x-pack-elasticsearch/pull/2500[#2500] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/1838[#1838])
// https://github.com/elastic/machine-learning-cpp/pull/473[#473] (issue: https://github.com/elastic/machine-learning-cpp/issues/455[#455])
// https://github.com/elastic/machine-learning-cpp/pull/338[#338] (issues: https://github.com/elastic/machine-learning-cpp/issues/287[#287], https://github.com/elastic/machine-learning-cpp/issues/320[#320], https://github.com/elastic/machine-learning-cpp/issues/332[#332])
// https://github.com/elastic/machine-learning-cpp/pull/355[#355] (issue: https://github.com/elastic/machine-learning-cpp/issues/319[#319])
// https://github.com/elastic/machine-learning-cpp/pull/451[#451] (issue: https://github.com/elastic/machine-learning-cpp/issues/443[#443])
// https://github.com/elastic/machine-learning-cpp/pull/431[#431]
// https://github.com/elastic/machine-learning-cpp/pull/483[#483]
// https://github.com/elastic/machine-learning-cpp/pull/481[#481] (issue: https://github.com/elastic/machine-learning-cpp/issues/482[#482])
// https://github.com/elastic/machine-learning-cpp/pull/477[#477]
// https://github.com/elastic/machine-learning-cpp/pull/471[#471] (issue: https://github.com/elastic/machine-learning-cpp/issues/453[#453])
// https://github.com/elastic/machine-learning-cpp/pull/470[#470] (issues: https://github.com/elastic/machine-learning-cpp/issues/447[#447], https://github.com/elastic/machine-learning-cpp/issues/450[#450], https://github.com/elastic/machine-learning-cpp/issues/467[#467])
// https://github.com/elastic/machine-learning-cpp/pull/465[#465]
// https://github.com/elastic/machine-learning-cpp/pull/458[#458]
// https://github.com/elastic/machine-learning-cpp/pull/450[#450] (issues: https://github.com/elastic/machine-learning-cpp/issues/424[#424], https://github.com/elastic/machine-learning-cpp/issues/454[#454])
// https://github.com/elastic/machine-learning-cpp/pull/448[#448]
// https://github.com/elastic/machine-learning-cpp/pull/447[#447] (issues: https://github.com/elastic/machine-learning-cpp/issues/402[#402], https://github.com/elastic/machine-learning-cpp/issues/413[#413])
// https://github.com/elastic/machine-learning-cpp/pull/441[#441] (issue: https://github.com/elastic/machine-learning-cpp/issues/432[#432])
// https://github.com/elastic/machine-learning-cpp/pull/421[#421] (issues: https://github.com/elastic/machine-learning-cpp/issues/322[#322], https://github.com/elastic/machine-learning-cpp/issues/396[#396])
// https://github.com/elastic/machine-learning-cpp/pull/419[#419] (issues: https://github.com/elastic/machine-learning-cpp/issues/280[#280], https://github.com/elastic/machine-learning-cpp/issues/387[#387])
// https://github.com/elastic/machine-learning-cpp/pull/407[#407] (issue: https://github.com/elastic/machine-learning-cpp/issues/329[#329])
// https://github.com/elastic/machine-learning-cpp/pull/406[#406] (issues: https://github.com/elastic/machine-learning-cpp/issues/395[#395], https://github.com/elastic/machine-learning-cpp/issues/404[#404])
// https://github.com/elastic/machine-learning-cpp/pull/382[#382] (issue: https://github.com/elastic/machine-learning-cpp/issues/320[#320])
// https://github.com/elastic/machine-learning-cpp/pull/363[#363] (issues: https://github.com/elastic/machine-learning-cpp/issues/319[#319], https://github.com/elastic/machine-learning-cpp/issues/361[#361])
// https://github.com/elastic/machine-learning-cpp/pull/361[#361] (issue: https://github.com/elastic/machine-learning-cpp/issues/281[#281])
// https://github.com/elastic/machine-learning-cpp/pull/304[#304] (issue: https://github.com/elastic/machine-learning-cpp/issues/285[#285])
// https://github.com/elastic/machine-learning-cpp/pull/300[#300]
// https://github.com/elastic/machine-learning-cpp/pull/290[#290]
// https://github.com/elastic/machine-learning-cpp/pull/289[#289]
// https://github.com/elastic/machine-learning-cpp/pull/276[#276]
// https://github.com/elastic/machine-learning-cpp/pull/336[#336] (issue: https://github.com/elastic/machine-learning-cpp/issues/328[#328])
// https://github.com/elastic/machine-learning-cpp/pull/261[#261]
// https://github.com/elastic/machine-learning-cpp/pull/259[#259] (issue: https://github.com/elastic/machine-learning-cpp/issues/256[#256])
// https://github.com/elastic/machine-learning-cpp/pull/258[#258] (issue: https://github.com/elastic/machine-learning-cpp/issues/256[#256])
// https://github.com/elastic/machine-learning-cpp/pull/257[#257] (issue: https://github.com/elastic/machine-learning-cpp/issues/256[#256])
// https://github.com/elastic/machine-learning-cpp/pull/256[#256] (issue: https://github.com/elastic/machine-learning-cpp/issues/172[#172])
// https://github.com/elastic/machine-learning-cpp/pull/211[#211]
* Added overall buckets, which summarize bucket results for multiple jobs.
For more information, see the <<ml-get-overall-buckets,get overall buckets>> API.
// https://github.com/elastic/x-pack-elasticsearch/pull/2713[#2713] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/2693[#2693])
//https://github.com/elastic/x-pack-elasticsearch/pull/2782
* Added job groups, which you can use to manage or retrieve information from
multiple jobs at once. Also updated many {ml} APIs to support groups and
wildcard expressions in the job identifier.
// https://github.com/elastic/x-pack-elasticsearch/pull/2155[#2155] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/2097[#2097])
// https://github.com/elastic/x-pack-elasticsearch/pull/2079[#2079] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/1876[#1876])

[[xes-enhancement-6.1.0]]
[float]
=== Enhancements

Machine Learning::

* Improved the way {ml} jobs are allocated to nodes, such that it is primarily
determined by the estimated memory requirement of the job. If there is insufficient
information about the job's memory requirements, the allocation decision is based
on job counts per node.
//TBD: Is "model size" clearer than "model footprint"?
// https://github.com/elastic/x-pack-elasticsearch/pull/2975[#2975] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/546[#546])
* Increased the default value of the `xpack.ml.max_open_jobs` setting from `10`
to `20`. The allocation of jobs to nodes now considers memory usage as well as
job counts, so it's reasonable to permit more small jobs on a single node. For
more information, see <<ml-settings>>.
// https://github.com/elastic/x-pack-elasticsearch/pull/3141[#3141] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/2975[#2975])
* Decreased the default `model_memory_limit` property value to 1 GB for new jobs.
If you want to create a job that analyzes high cardinality fields, you can
increase this property value. For more information, see <<ml-apilimits>>.
// https://github.com/elastic/x-pack-elasticsearch/pull/2300[#2300] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/546[#546])
* Improved analytics related to decay rates when predictions are very accurate.
// https://github.com/elastic/machine-learning-cpp/pull/420[#420]
* Improved analytics related to detecting non-negative quantities and using this
information to constrain analysis, predictions, and confidence intervals.
// https://github.com/elastic/machine-learning-cpp/pull/415[#415] (issue: https://github.com/elastic/machine-learning-cpp/issues/414[#414])
* Improved periodic trough or spike detection.
// https://github.com/elastic/machine-learning-cpp/pull/326[#326] (issue: https://github.com/elastic/machine-learning-cpp/issues/303[#303])
* Improved the speed of the aggregation of {ml} results.
// https://github.com/elastic/machine-learning-cpp/pull/318[#318] (issue: https://github.com/elastic/machine-learning-cpp/issues/267[#267])
* Improved probability calculation performance.
// https://github.com/elastic/machine-learning-cpp/pull/315[#315]
* Expedited bucket processing time in very large populations by determining when
there are nearly duplicate values in a bucket and de-duplicating the samples that
are added to the model.
// https://github.com/elastic/machine-learning-cpp/pull/313[#313] (issue: https://github.com/elastic/machine-learning-cpp/issues/268[#268])
* Improved handling of periodically missing values.
// https://github.com/elastic/machine-learning-cpp/pull/309[#309] (issues: https://github.com/elastic/machine-learning-cpp/issues/303[#303], https://github.com/elastic/machine-learning-cpp/issues/305[#305])
* Improved analytics related to diurnal periodicity.
// https://github.com/elastic/machine-learning-cpp/pull/305[#305] (issue: https://github.com/elastic/machine-learning-cpp/issues/299[#299])
* Reduced memory usage during population analysis by releasing redundant memory
after the bucket results are written.
// https://github.com/elastic/machine-learning-cpp/pull/391[#391] (issue: https://github.com/elastic/machine-learning-cpp/issues/297[#297])
* Improved modeling of long periodic components, particularly when there is a
long bucket span.
// https://github.com/elastic/machine-learning-cpp/pull/298[#298] (issue: https://github.com/elastic/machine-learning-cpp/issues/272[#272])
////
Monitoring::
* [Monitoring] Cleaner Service should be able to cleanup .watcher-history*
// https://github.com/elastic/x-pack-elasticsearch/pull/2696[#2696] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/1337[#1337])
* [Monitoring] Add interval_ms to Monitoring documents
// https://github.com/elastic/x-pack-elasticsearch/pull/2650[#2650]
* [Monitoring] Shorten names for cluster alert watches
// https://github.com/elastic/x-pack-elasticsearch/pull/2558[#2558]
////

Security::
* Added the `manage_index_templates` cluster privilege to the built-in role
`kibana_system`. For more information, see
{xpack-ref}/security-privileges.html#privileges-list-cluster[Cluster Privileges]
and {xpack-ref}/built-in-roles.html[Built-in Roles].
// https://github.com/elastic/x-pack-elasticsearch/pull/3009[#3009] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/2937[#2937])
//* Newly created or updated watches execute with the privileges of the user that
//last modified the watch.
// https://github.com/elastic/x-pack-elasticsearch/pull/2808[#2808] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/2201[#2201])
* Added log messages when a PEM key is found when a PEM certificate was
expected (or vice versa) in the `xpack.ssl.key` or `xpack.ssl.certificate` settings.
// https://github.com/elastic/x-pack-elasticsearch/pull/2670[#2670] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/2657[#2657])
* Added the new `certutil` command to simplify the creation of certificates for
use with the Elastic stack.
//For more information, see <<certutil>>.
// https://github.com/elastic/x-pack-elasticsearch/pull/2561[#2561] (issues: https://github.com/elastic/x-pack-elasticsearch/issues/12[#12], https://github.com/elastic/x-pack-elasticsearch/issues/2165[#2165])
* Added automatic detection of support for AES 256 bit TLS ciphers and enabled
their use when the JVM supports them.
// https://github.com/elastic/x-pack-elasticsearch/pull/2137[#2137]
////
Watcher::
* Watcher: Return useful error message when no accounts are found
// https://github.com/elastic/x-pack-elasticsearch/pull/2897[#2897] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/2666[#2666])
* Watcher: Add thread pool rejection to execution state
// https://github.com/elastic/x-pack-elasticsearch/pull/2805[#2805]
* Watcher: Ensure all templates exist before starting watcher
// https://github.com/elastic/x-pack-elasticsearch/pull/2765[#2765] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/2761[#2761])
* Watcher: Add execution state to watch status
// https://github.com/elastic/x-pack-elasticsearch/pull/2699[#2699] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/2385[#2385])
* Watcher: Allow JIRA path to be custom chosen
// https://github.com/elastic/x-pack-elasticsearch/pull/2682[#2682]
* Watcher: Stop swallowing exceptions, always return them instead of message
// https://github.com/elastic/x-pack-elasticsearch/pull/1933[#1933] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/1816[#1816])
////

[[xes-bug-6.1.0]]
[float]
=== Bug fixes

Machine Learning::

* Improved handling of scenarios where there are insufficient values to
interpolate trend components.
// https://github.com/elastic/machine-learning-cpp/pull/462[#462] (issue: https://github.com/elastic/machine-learning-cpp/issues/459[#459])
* Improved calculation of confidence intervals.
// https://github.com/elastic/machine-learning-cpp/pull/452[#452] (issue: https://github.com/elastic/machine-learning-cpp/issues/439[#439])
* Fixed degrees of freedom calculation that could lead to excessive error logging.
// https://github.com/elastic/machine-learning-cpp/pull/350[#350] (issue: https://github.com/elastic/machine-learning-cpp/issues/335[#335])
* Improved trend modeling with long bucket spans.
// https://github.com/elastic/machine-learning-cpp/pull/277[#277] (issue: https://github.com/elastic/machine-learning-cpp/issues/272[#272])
* Fixed timing of when model size statistics are written. Previously, if there
were multiple partitions, there could be multiple model size stats docs written
within the same bucket.
// https://github.com/elastic/machine-learning-cpp/pull/411[#411] (issue: https://github.com/elastic/machine-learning-cpp/issues/398[#398])
* Updated the calculation of the model memory to include the memory used by
partition, over, by, or influencer fields.
// https://github.com/elastic/machine-learning-cpp/pull/409[#409] (issue: https://github.com/elastic/machine-learning-cpp/issues/383[#383])
* Fixed calculation of the `frequency` property value for {dfeeds} that use
aggregations. The value must be a multiple of the histogram interval. For more
information, see
{xpack-ref}/ml-configuring-aggregation.html[Aggregating Data for Faster Performance].
// https://github.com/elastic/x-pack-elasticsearch/pull/3205[#3205] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/3204[#3204])
* Removed unnecessary messages from logs when a job is forcefully closed.
// https://github.com/elastic/x-pack-elasticsearch/pull/3193[#3193] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/3149[#3149])
////
Monitoring::
* [Monitoring/Cluster Alerts] Fix the email message when cluster license expiration is resolved
// https://github.com/elastic/x-pack-elasticsearch/pull/2557[#2557]
* [Monitoring] Remove Legacy Monitoring Indices
// https://github.com/elastic/x-pack-elasticsearch/pull/2513[#2513]
* [Monitoring] Remove Dedicated IndicesStatsCollector
// https://github.com/elastic/x-pack-elasticsearch/pull/2192[#2192]
* [Monitoring] Remove monitoring resolvers
// https://github.com/elastic/x-pack-elasticsearch/pull/2566[#2566] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/2226[#2226])
* [Security] Add 'read_cross_cluster' privilege for .monitoring indices
// https://github.com/elastic/x-pack-elasticsearch/pull/2111[#2111] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/2110[#2110])
////

Security::
* Fixed REST requests that required a body but did not validate it, resulting in
null pointer exceptions.
// https://github.com/elastic/x-pack-elasticsearch/pull/2610[#2610]
////
Watcher::
* "password" misspelled in action webhook docs [ISSUE]
// https://github.com/elastic/x-pack-elasticsearch/pull/3094[#3094]
* Watcher: Create templates on nodes newer than the master
// https://github.com/elastic/x-pack-elasticsearch/pull/2950[#2950] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/2944[#2944])
* Watcher: Properly url encode room names
// https://github.com/elastic/x-pack-elasticsearch/pull/2896[#2896] (issues: https://github.com/elastic/x-pack-elasticsearch/issues/2371[#2371], https://github.com/elastic/x-pack-elasticsearch/issues/2429[#2429])
* Watcher: Only load active watches on load
// https://github.com/elastic/x-pack-elasticsearch/pull/2408[#2408]
* Watcher: Ensure emit_stacktraces parameter works
// https://github.com/elastic/x-pack-elasticsearch/pull/2399[#2399] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/2396[#2396])
* Watcher: Fix restart logic watcher after upgrade
// https://github.com/elastic/x-pack-elasticsearch/pull/2336[#2336] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/2331[#2331])
* Watcher: Do not update active state during execution
// https://github.com/elastic/x-pack-elasticsearch/pull/2204[#2204]
* Watcher: Ignore if template is missing when upgrade is running
// https://github.com/elastic/x-pack-elasticsearch/pull/2199[#2199]
* Watcher: Load for watch for execution as late as possible
// https://github.com/elastic/x-pack-elasticsearch/pull/2151[#2151] (issue: https://github.com/elastic/x-pack-elasticsearch/issues/395[#395])
////
